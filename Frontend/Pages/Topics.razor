@page "/topics"

<main class="topics-scope">
    <div class="topics-wrap">

        <!-- Header: title left, search right -->
        <div class="header-row">
            <h1 class="title">
                <span class="code">BUM 281</span>
                <span class="divider">•</span>
                <span class="label">Topics</span>
            </h1>

            <label class="search">
                <svg class="icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                    <circle cx="10" cy="10" r="6" stroke="currentColor" stroke-width="2" fill="none" />
                    <line x1="14" y1="14" x2="20" y2="20" stroke="currentColor" stroke-width="2" />
                </svg>
                <input type="text"
                       placeholder="Search topics…"
                       @bind="SearchQuery"
                       @bind:event="oninput" />
            </label>
        </div>

        <!-- Topic pills -->
        <section class="pill-grid">
            @for (int i = 0; i < FilteredTopics.Count; i++)
            {
                var t = FilteredTopics[i];
                <a class="@(i == 0 ? "pill active" : "pill")" href="/topichub/tutors" title="@t">
                    <span class="num">@($"{i + 1}.")</span>
                    <span class="text">@t</span>
                </a>
            }
        </section>
    </div>
</main>

@code {
    private string SearchQuery { get; set; } = "";

    private readonly List<string> AllTopics = new()
  {
    "Introduction to topics",
    "How to not be a bum",
    "History of bum",
    "Blablabla",
    "Another topic",
    "Lets fill in all the topics",
    "Random words",
    "Last made up topic | pr..."
  };

    private List<string> FilteredTopics =>
        string.IsNullOrWhiteSpace(SearchQuery)
            ? AllTopics
            : AllTopics.Where(t => t.Contains(SearchQuery, StringComparison.OrdinalIgnoreCase)).ToList();
}

<style>
    /* ===== SCOPED PAGE THEME (won’t touch nav) ===== */
    .topics-scope {
        /* palette */
        --bg: #F2F3F5;
        --panel: #fff;
        --ink: #1F2937;
        --muted: #6B7280;
        --ring: rgba(0,0,0,.10);
        --shadow: 0 8px 22px rgba(0,0,0,.06);
        --radius: 16px;
        --stud-blue: #1D4ED8;
        /* lock a clean sans within this page so we never fall back to Times */
        font-family: system-ui, -apple-system, "Segoe UI", Inter, Roboto, Arial, "Helvetica Neue", sans-serif;
        color: var(--ink);
    }

        .topics-scope .topics-wrap {
            width: min(1200px, 92vw);
            margin-inline: auto;
            padding-inline: clamp(12px,3vw,24px);
            padding-block: clamp(16px,3.2vw,28px);
        }

        /* Header */
        .topics-scope .header-row {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: end;
            gap: clamp(12px,2vw,20px);
            margin-bottom: clamp(14px,2.2vw,18px);
        }

        .topics-scope .title {
            margin: 0;
            display: flex;
            align-items: baseline;
            gap: 10px;
            letter-spacing: .2px;
            line-height: 1.05;
            font-weight: 900;
            font-size: clamp(28px, 4.2vw, 46px);
            color: var(--ink);
        }

            .topics-scope .title .code {
                font-weight: 900;
            }

            .topics-scope .title .divider {
                color: var(--muted);
                opacity: .7;
                font-weight: 800;
            }
            /* Keep “Topics” plain ink (no purple) */
            .topics-scope .title .label {
                color: var(--ink);
                font-weight: 900;
            }

        /* Search */
        .topics-scope .search {
            justify-self: start;
            display: flex;
            align-items: center;
            gap: 10px;
            background: #fff;
            border: 1px solid var(--ring);
            border-radius: 999px;
            padding: 12px 16px;
            color: #9aa0a6;
            min-width: clamp(240px, 36vw, 420px);
            box-shadow: inset 0 0 0 1px rgba(0,0,0,.03);
            transition: box-shadow .18s ease, border-color .18s ease, color .18s ease;
        }

            .topics-scope .search:focus-within {
                border-color: color-mix(in oklab, var(--stud-blue) 45%, #fff);
                box-shadow: 0 0 0 8px color-mix(in oklab, var(--stud-blue) 14%, transparent);
                color: var(--stud-blue);
            }

            .topics-scope .search input {
                border: 0;
                outline: 0;
                background: transparent;
                color: var(--ink);
                font: inherit;
                width: 100%;
            }

        /* Pills */
        .topics-scope .pill-grid {
            margin-top: clamp(6px,1.2vw,12px);
            display: grid;
            grid-template-columns: repeat(3, minmax(0,1fr));
            gap: clamp(12px,1.6vw,20px) clamp(18px,2.2vw,28px);
            padding-bottom: 28px;
        }

        .topics-scope .pill {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
            height: 44px;
            padding: 0 14px;
            border-radius: 14px;
            text-decoration: none;
            color: var(--ink);
            background: color-mix(in oklab, var(--ink) 2.5%, white);
            border: 1px solid var(--ring);
            box-shadow: var(--shadow);
            font-weight: 800;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: transform .14s ease, box-shadow .18s ease, border-color .18s ease;
        }

            .topics-scope .pill .num {
                display: inline-grid;
                place-items: center;
                min-width: 24px;
                height: 24px;
                padding-inline: 2px;
                border-radius: 999px;
                background: color-mix(in oklab, var(--ink) 12%, white);
                color: #fff;
                font-size: .82rem;
                line-height: 1;
            }

            .topics-scope .pill .text {
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .topics-scope .pill:hover {
                transform: translateY(-2px);
                box-shadow: 0 16px 44px rgba(0,0,0,.16), 0 0 0 10px color-mix(in oklab, var(--stud-blue) 10%, transparent);
                border-color: color-mix(in oklab, var(--ink) 22%, #fff);
            }

            /* Active pill: keep neutral (white) — no purple */
            .topics-scope .pill.active {
                background: #fff;
                color: var(--ink);
                border-color: color-mix(in oklab, var(--ink) 35%, #fff);
            }

                .topics-scope .pill.active .num {
                    background: color-mix(in oklab, var(--ink) 85%, #fff);
                    color: #fff;
                }

    /* Responsive */
    @@media (max-width: 980px) {
        .topics-scope .pill-grid {
            grid-template-columns: repeat(2, minmax(0,1fr));
        }
    }

    @@media (max-width: 640px) {
        .topics-scope .header-row {
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .topics-scope .search {
            min-width: min(100%, 420px);
        }

        .topics-scope .pill-grid {
            grid-template-columns: 1fr;
        }
    }

    /* ===== NAV STABILIZER (page-local; won’t restyle, just prevents layout drift) ===== */
    @@layer topics_nav_fix {
        nav {
            display: flex !important;
            align-items: center !important;
            min-height: 64px !important;
            padding-block: 0 !important;
        }

            nav * {
                font-family: inherit;
            }
            /* don’t force serif */
            nav :is(.mainTitle, .avatar, .hamburger, .menu-toggle) {
                align-self: center !important;
            }
    }
</style>
